<div>{{ this.formGroup.value | json }}</div>
<div class="posts-container">
  <form (submit)="createPost()" [formGroup]="formGroup" class="post-creation-form">
    <mat-form-field>
      <mat-label>{{ 'question' | translate }}</mat-label>
      <input matInput formControlName="question" />
    </mat-form-field>
    <div class="left-right">
      <div class="image1-container">
        <div>
          <label for="image1">{{ 'image' | translate }} 1</label>
          <input type="file" (change)="uploadImage(0, $event)" accept=".png,.jpg" id="image1" />
          <mat-progress-spinner class="upload-progress-image1" [value]="uploadProgressImage1$ | async"></mat-progress-spinner>
        </div>
      </div>
      <div class="image2-container">
        <div>
          <label for="image1">{{ 'image' | translate }} 2</label>
          <input type="file" (change)="uploadImage(1, $event)" accept=".png,.jpg" id="image2" />
          <mat-progress-spinner class="upload-progress-image2" [value]="uploadProgressImage2$ | async"></mat-progress-spinner>
        </div>
      </div>
    </div>
    <button mat-stroked-button type="submit">{{ 'post' | translate }}</button>
  </form>
  <ng-container *ngIf="(posts$ | async).length > 0; else noPosts">
    <mat-card class="example-card" *ngFor="let post of posts$ | async">
      <mat-card-header>
        <div mat-card-avatar class="example-header-image"></div>
        <mat-card-title
          ><p>{{ post.question }}</p></mat-card-title
        >
        <mat-card-subtitle>{{ post.addedByUser.email }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content class="left-right">
        <div class="thumbs-up" (click)="clickNthImage(i, post)" *ngFor="let image of post.images; let i = index">
          <img [src]="post.images[i].url" alt="First image uploaded by user {{ post.addedByUser.email }}" />
          <span class="thumbs-up-counter"> <mat-icon>thumb_up</mat-icon> {{ getVoteCount(post, i) }}</span>
        </div>
      </mat-card-content>
      <mat-card-actions>
        <button mat-button>SHARE</button>
      </mat-card-actions>
    </mat-card>
  </ng-container>
</div>
<ng-template #noPosts>
  <p>{{ 'noPostsFound' | translate }}</p>
</ng-template>
<mat-spinner *ngIf="isLoading$ | async"></mat-spinner>
